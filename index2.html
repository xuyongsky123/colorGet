<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>获取鼠标在图片上点击位置的颜色</title>
	<script type="text/javascript" src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="js/colorGetActive.js"></script>
</head>
<body>
	<script type="text/javascript">
		//禁止页面滑动（适合移动端）
		var jinzhi=0;
	    document.addEventListener("touchmove",function(e){
	        if(jinzhi==0){
	            e.preventDefault();
	            e.stopPropagation();
	        }
	    },false);

		var draw = function(img) {
			var canvas = document.createElement("canvas");
			canvas.id = 'canvas';
			canvas.width = img.width;
			canvas.height = img.height;
			var context = canvas.getContext("2d");
			context.drawImage(img, 0, 0);

			$('body').append(canvas);
			var _T = $('#canvas');
			_T.click(function (e) {
				var canvasOffset = _T.offset();
				var canvasX = Math.floor(e.pageX - canvasOffset.left);
				var canvasY = Math.floor(e.pageY - canvasOffset.top);

				// 获取该点像素的数据
				var colorData = document.getElementById("canvas").getPixelColor(canvasX, canvasY);

				$('div').remove();
				$("body").append('<div style="height:200px;width:200px;display:inline-block;background-color:'+colorData.hex+'">当前点击位置颜色：<br/>'+colorData.hex+'<br/>'+colorData.rgba+'<br/>'+colorData.rgb+'</div>');
			});
		}
		$(document).ready(function () {
			var img = new Image();
			img.src = "image/test.jpg";
			$(img).load(function () {
				draw(img);
			});
		});

	</script>
</body>
</html>